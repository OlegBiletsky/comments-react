(this["webpackJsonpcomments-react"]=this["webpackJsonpcomments-react"]||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(9),r=a.n(c),s=a(5),o=a(7),i=(a(34),a(20)),u=(a(35),a(36),"GET_MORE_COMMENTS_REQUEST"),l="GET_MORE_COMMENTS_SUCCESS",m="GET_COMMENTS_FAIL",p="GET_PAGE_COMMENTS_REQUEST",d="GET_PAGE_COMMENTS_SUCCESS",j="CHANGE_INPUT_NAME",b="CHANGE_INPUT_TEXT",O="ADD_COMMENT_REQUEST",f="ADD_COMMENT_SUCCESS",x="ADD_COMMENT_FAIL",h=a(4),g=a.n(h),v=a(6),_="/api/goods/30/comments",N=function(e){return fetch("".concat(_,"?page=").concat(e))},C=function(e){return fetch(_,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)})},y=function(e){return function(){var t=Object(v.a)(g.a.mark((function t(a){var n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:u}),t.prev=1,t.next=4,N(a);case 4:return n=t.sent,t.next=7,n.json();case 7:c=t.sent,e({type:l,payload:c}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e({type:m,payload:t.t0});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(v.a)(g.a.mark((function t(a){var n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:p}),t.prev=1,t.next=4,N(a);case 4:return n=t.sent,t.next=7,n.json();case 7:c=t.sent,e({type:d,payload:c}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e({type:m,payload:t.t0});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(v.a)(g.a.mark((function t(a){var n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:O}),t.prev=1,t.next=4,C(a);case 4:return n=t.sent,t.next=7,n.json();case 7:c=t.sent,e({type:f,payload:c}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e({type:x,payload:t.t0});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},P=(a(38),a(17)),k=a(1);var M=function(e){var t=e.inputNameValue,a=e.inputTextValue,n=e.handleChangeNameInput,c=e.handleChangeTextInput,r=e.sendComments;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("h1",{className:"title",children:[Object(k.jsx)("div",{className:"title__first",children:"Please leave a comment"}),Object(k.jsxs)("div",{className:"title__second",children:[Object(k.jsx)("p",{children:"Your feedback is appreciated"}),Object(k.jsx)(P.a,{className:"title__icon"})]})]}),Object(k.jsxs)("form",{className:"form",noValidate:!0,onSubmit:function(e){return e.preventDefault()},children:[Object(k.jsx)("div",{className:"form-name",children:Object(k.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)},placeholder:"Your name",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Name"},className:"form-name__field",name:"form-name__field",type:"text",autoComplete:"off"})}),Object(k.jsx)("div",{className:"form-text",children:Object(k.jsx)("textarea",{value:a,onChange:function(e){return c(e.target.value)},placeholder:"Add a comment",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Add a comment"},className:"form-text__field",name:"form-text__field",type:"text",autoComplete:"off"})}),Object(k.jsx)("button",{className:"form-submit-btn",onClick:function(){var e=Object(v.a)(g.a.mark((function e(s){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({name:t,text:a});case 2:n(""),c("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),disabled:!(t&&a),children:Object(k.jsxs)("div",{className:"form-submit-btn__text-wrapper",children:[Object(k.jsx)("div",{className:"form-submit-btn__text",children:"Comment"}),Object(k.jsx)(P.b,{className:"form-submit-btn__icon"})]})})]})]})},S=Object(o.b)((function(e){return{inputNameValue:e.form.value.inputNameValue,inputTextValue:e.form.value.inputTextValue}}),(function(e){return{changeInputName:function(t){return e({type:j,payload:t})},changeInputText:function(t){return e({type:b,payload:t})},sendComments:T(e)}}))((function(e){var t=e.inputNameValue,a=e.inputTextValue,n=e.changeInputName,c=e.changeInputText,r=e.sendComments;return Object(k.jsx)(M,{inputNameValue:t,inputTextValue:a,handleChangeNameInput:n,handleChangeTextInput:c,sendComments:r})})),L=a(24),w=(a(40),a(21)),V=a(18);var I=function(e){var t=e.comments,a=void 0===t?[]:t;return Object(k.jsx)(k.Fragment,{children:!!(null===a||void 0===a?void 0:a.length)&&a.map((function(e){return Object(k.jsx)("div",{className:"comment-wrapper",children:Object(k.jsxs)("div",{className:"comment",children:[Object(k.jsxs)("div",{className:"comment-user",children:[Object(k.jsx)("div",{className:"comment-user__photo",children:Object(k.jsx)(w.a,{className:"comment-user__icon"})}),Object(k.jsxs)("div",{className:"comment-user__name",children:[Object(k.jsx)("p",{children:"guest:"}),e.name]}),Object(k.jsxs)("div",{className:"comment-user__time",children:[Object(k.jsxs)("div",{className:"comment-user__time1",children:[e.created_at&&Object(k.jsx)("span",{children:Object(k.jsx)(V.a,{})}),e.created_at&&e.created_at.split("T")[0]]}),Object(k.jsxs)("div",{className:"comment-user__time2",children:[Object(k.jsx)("span",{children:Object(k.jsx)(V.b,{})}),e.created_at?e.created_at.split("T")[1].slice(0,5):Object(k.jsx)("p",{children:"recently"})]})]})]}),Object(k.jsx)("div",{className:"comment-text",children:Object(k.jsx)("div",{className:"comment-text__message",children:e.text})})]})})}))})},A=(a(41),a(22)),D=function(e){var t=e.getMoreComments,a=e.lastPage,n=e.currentPage;return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{className:"more-btn-wrapper",children:a!==n&&Object(k.jsx)("button",{onClick:function(){t(n+1)},className:"more-btn",children:Object(k.jsxs)("div",{className:"more-btn-inner-wrapper",children:[Object(k.jsx)("div",{className:"more-btn__text",children:"Download more..."}),Object(k.jsx)(A.a,{className:"more-btn__icon"})]})})})})},G=function(e){return e.comments.comments.database},U=function(e){return e.comments.lastPage},F=function(e){var t=function(e){return e.comments.pages}(e);return t[t.length-1]},R=function(e){return e.comments.separateCurrentPage},B=a(23),J=a.n(B),Q=(a(42),Object(o.b)((function(e){return{comments:G(e),lastPage:U(e),currentPage:F(e),separateCurrentPage:R(e)}}),(function(e){return{getComments:E(e),getMoreComments:y(e)}}))((function(e){var t=e.comments,a=e.getComments,c=e.getMoreComments,r=e.lastPage,s=e.currentPage,o=e.separateCurrentPage,i=Object(n.useState)(!0),u=Object(L.a)(i,2),l=u[0],m=u[1];return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(1);case 2:m(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(k.jsx)(k.Fragment,{children:!l&&Object(k.jsxs)("div",{children:[Object(k.jsx)(I,{comments:t}),Object(k.jsx)(D,{lastPage:r,currentPage:s,getMoreComments:c}),Object(k.jsx)("div",{className:"pagination-wrapper",children:Object(k.jsx)(J.a,{containerClassName:"pagination-container",pageLinkClassName:"pageLinkClassName",activeLinkClassName:"activeLinkClassName",previousLinkClassName:"previousLinkClassName",nextLinkClassName:"nextLinkClassName",disabledClassName:"disabledClassName",breakLinkClassName:"breakLinkClassName",pageCount:r,pageRangeDisplayed:3,marginPagesDisplayed:1,previousLabel:"< Previous",nextLabel:"Next >",onPageChange:function(e){!l&&a(e.selected+1)},initialPage:s-1,forcePage:o-1})})]})})})));var X=function(){return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(S,{}),Object(k.jsx)(Q,{})]})},H=a(11),Y=a(3),q={comments:{isLoading:null,error:null,database:[]},separateCurrentPage:1,pages:[1],lastPage:null},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:case p:return Object(Y.a)(Object(Y.a)({},e),{},{comments:Object(Y.a)(Object(Y.a)({},e.comments),{},{isLoading:!0,error:null})});case l:return Object(Y.a)(Object(Y.a)({},e),{},{comments:{isLoading:!1,error:!1,database:[].concat(Object(H.a)(e.comments.database),Object(H.a)(t.payload.data))},separateCurrentPage:t.payload.current_page,pages:[].concat(Object(H.a)(e.pages),[t.payload.current_page]),lastPage:t.payload.last_page});case d:return Object(Y.a)(Object(Y.a)({},e),{},{comments:{isLoading:!1,error:!1,database:t.payload.data},separateCurrentPage:t.payload.current_page,pages:[t.payload.current_page],lastPage:t.payload.last_page});case m:return Object(Y.a)(Object(Y.a)({},e),{},{comments:{isLoading:!1,error:t.payload,database:!1}});case O:return Object(Y.a)(Object(Y.a)({},e),{},{comments:Object(Y.a)(Object(Y.a)({},e.comments),{},{isLoading:!0,error:null})});case f:return Object(Y.a)(Object(Y.a)({},e),{},{comments:Object(Y.a)(Object(Y.a)({},e.comments),{},{isLoading:!1,error:!1})});case x:return Object(Y.a)(Object(Y.a)({},e),{},{comments:Object(Y.a)(Object(Y.a)({},e.comments),{},{isLoading:!1,error:t.payload})});default:return e}},K={value:{inputNameValue:"",inputTextValue:""}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(Y.a)(Object(Y.a)({},e),{},{value:Object(Y.a)(Object(Y.a)({},e.value),{},{inputNameValue:t.payload})});case b:return Object(Y.a)(Object(Y.a)({},e),{},{value:Object(Y.a)(Object(Y.a)({},e.value),{},{inputTextValue:t.payload})});default:return e}},Z=Object(s.c)({comments:z,form:W}),$=[i.a];var ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,te=Object(s.e)(Z,ee(s.a.apply(void 0,$)));r.a.render(Object(k.jsx)(o.a,{store:te,children:Object(k.jsx)(X,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.dfc3ce42.chunk.js.map